{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "title": "\u9f99\u5b87\u7fd4\u7684\u5c0f\u672c\u672c", "subTitle": " ", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/go-lian-jie-shu-ju-ku.html", "labels": ["documentation", "go"], "postTitle": "go\u8fde\u63a5\u6570\u636e\u5e93", "postUrl": "post/go-lian-jie-shu-ju-ku.html", "postSourceUrl": "https://github.com/longxiucai/longxiucai.github.io/issues/1", "commentNum": 0, "wordCount": 823, "description": "```\r\npackage dbtest\r\n\r\nimport (\r\n\t'database/sql'\r\n\t'fmt'\r\n\t'log'\r\n\r\n\t_ 'github.com/go-sql-driver/mysql'\r\n)\r\n\r\nfunc maindb() {\r\n\t// \u8fde\u63a5 MySQL \u6570\u636e\u5e93\r\n\tdb, err := sql.Open('mysql', 'dbinit:123456@tcp(10.42.186.232:3306)/dbinit_test')\r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n\tdefer db.Close()\r\n\r\n\t// \u6d4b\u8bd5\u8fde\u63a5\r\n\terr = db.Ping()\r\n\tif err != nil {\r\n\t\tlog.Fatal('Error connecting to the database:', err)\r\n\t}\r\n\r\n\tfmt.Println('Connected to MySQL database successfully!')\r\n\r\n\t// \u67e5\u8be2\u793a\u4f8b\r\n\trows, err := db.Query('SELECT * FROM users')\r\n\tif err != nil {\r\n\t\tlog.Fatal('Error executing query:', err)\r\n\t}\r\n\tdefer rows.Close()\r\n\r\n\t// \u904d\u5386\u67e5\u8be2\u7ed3\u679c\r\n\tfor rows.Next() {\r\n\t\tvar id int\r\n\t\tvar name string\r\n\t\terr := rows.Scan(&id, &name)\r\n\t\tif err != nil {\r\n\t\t\tlog.Fatal('Error scanning row:', err)\r\n\t\t}\r\n\t\tfmt.Printf('ID: %d, Name: %s\\n', id, name)\r\n\t}\r\n}\r\n```\u3002", "top": 0, "createdAt": 1719885876, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-02", "dateLabelColor": "#bc4c00"}, "P2": {"htmlDir": "docs/post/go-jie-xi-zheng-shu-wen-jian.html", "labels": ["documentation", "go"], "postTitle": "go\u89e3\u6790\u8bc1\u4e66\u6587\u4ef6", "postUrl": "post/go-jie-xi-zheng-shu-wen-jian.html", "postSourceUrl": "https://github.com/longxiucai/longxiucai.github.io/issues/2", "commentNum": 0, "wordCount": 1291, "description": "```\r\npackage cert\r\n\r\nimport (\r\n\t'crypto/x509'\r\n\t'encoding/pem'\r\n\t'os'\r\n\t'path/filepath'\r\n\t'strings'\r\n\t'time'\r\n\r\n\tlog 'github.com/sirupsen/logrus'\r\n)\r\n\r\nfunc parseCertificate(file string) {\r\n\t// \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\r\n\tfileData, err := os.ReadFile(file)\r\n\tif err != nil {\r\n\t\tlog.Errorf('Error reading file %s: %s\\n', file, err)\r\n\t\treturn\r\n\t}\r\n\r\n\t// \u89e3\u6790 PEM \u5757\r\n\tblock, _ := pem.Decode(fileData)\r\n\tif block == nil {\r\n\t\tlog.Errorf('No PEM block found in file %s\\n', file)\r\n\t\treturn\r\n\t}\r\n\r\n\t// \u5224\u65ad\u6587\u4ef6\u7c7b\u578b\r\n\tfileType := strings.ToLower(filepath.Ext(file))\r\n\tswitch fileType {\r\n\tcase '.crt', '.pem':\r\n\t\t// \u89e3\u6790\u8bc1\u4e66\r\n\t\tcert, err := x509.ParseCertificate(block.Bytes)\r\n\t\tif err != nil {\r\n\t\t\tlog.Errorf('Error parsing certificate from file %s: %s\\n', file, err)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// \u8f93\u51fa\u8bc1\u4e66\u6709\u6548\u671f\u7b49\u4fe1\u606f\r\n\t\tlog.Infof('Certificate in file %s:', file)\r\n\t\tlog.Infof('  Subject: %s', cert.Subject.CommonName)\r\n\t\tlog.Infof('  Valid from: %s', cert.NotBefore)\r\n\t\tlog.Infof('  Valid until: %s', cert.NotAfter)\r\n\r\n\t\t// \u8ba1\u7b97\u8bc1\u4e66\u6709\u6548\u671f\u7ed3\u675f\u65f6\u95f4\u4e0e\u5f53\u524d\u65f6\u95f4\u4e4b\u95f4\u7684\u5929\u6570\u5dee\r\n\t\tnow := time.Now()\r\n\t\texpiresInDays := int((time.Duration(cert.NotAfter.Sub(now).Hours()) / 24))\r\n\t\tlog.Infof('\u8bc1\u4e66%s \u5c06\u4e8e %d \u5929\u540e\u8fc7\u671f', cert.Subject.CommonName, expiresInDays)\r\n\t\tlog.Infof('---------------------------')\r\n\tdefault:\r\n\t\tlog.Infof('Unsupported file type: %s %s', fileType, file)\r\n\t}\r\n}\r\n```\u3002", "top": 0, "createdAt": 1719887595, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-02", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/xiu-gai-pod-wang-duan-yu-calico-pei-zhi.html", "labels": ["documentation"], "postTitle": "\u4fee\u6539pod\u7f51\u6bb5\u4e0ecalico\u914d\u7f6e", "postUrl": "post/xiu-gai-pod-wang-duan-yu-calico-pei-zhi.html", "postSourceUrl": "https://github.com/longxiucai/longxiucai.github.io/issues/3", "commentNum": 0, "wordCount": 2283, "description": "1. vim /etc/kubernetes/manifests/kube-controller-manager.yaml \u30103\u4e2amaster\u4e00\u4e2a\u4e00\u4e2a\u7684\u6267\u884c\uff0c\u6700\u597d\u662fkube-controller-manager-\u8282\u70b9\u540d\u5b57\u7684pod Running\u4e4b\u540e\u518d\u4fee\u6539\u4e0b\u4e00\u4e2a\u8282\u70b9\u3011\r\n\t\t19\u884c\uff1a--cluster-cidr=10.128.0.0/18\r\n\r\n2. kubectl edit cm kubeadm-config -n kube-system\r\n\t\tpodSubnet: 10.128.0.0/18\r\n\r\n3. kubectl edit cm kube-proxy -n kube-system\r\n\t\tclusterCIDR: 10.128.0.0/18\r\n\r\n4. kubectl edit ippool default-ipv4-ippool\r\n\t\tcidr: 10.128.0.0/18\r\n\r\n5. kubectl edit cm calico-config -n kube-system \uff1a\r\n          'ipam': {\r\n              'type': 'calico-ipam',\t\t\t\t\t              #\u9017\u53f7\r\n              'ipv4_pools': ['default-ipv4-ippool']   #\u6dfb\u52a0\u6b64\u884c\uff0c\u524d\u9762\u5fc5\u987b\u662f\u7a7a\u683c\u4e0d\u80fd\u662ftab\r\n          },\r\n\r\n6. kubectl rollout restart -n kube-system daemonset.apps/calico-node\r\n\u7b49\u5f85calico\u7684pod\u5168\u90e8running\uff0c\u5168\u90e8\u8282\u70b9\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709'ipv4_pools': ['default-ipv4-ippool']\uff1a\r\ncat /etc/cni/net.d/00-multus.conf\r\ncat /etc/cni/net.d/10-calico.conflist\r\n\r\n7. kubectl  edit ippool kubevirt-vm-ippool\r\n  cidr: 10.128.128.0/18\r\n\r\n8. kubectl delete ippool other-ippool\r\n\r\n9. kubectl cluster-info dump | grep cluster-cidr\r\n\r\n\r\n\u9ed8\u8ba4\u4f7f\u7528default pool\uff0c\u5f00\u542fnoipam\u529f\u80fd\r\ncalico-config configMap:\r\ncni.projectcalico.org/ipAddrsNoIpam\r\n```\r\napiVersion: v1\r\ndata:\r\n  calico_backend: bird\r\n  cni_network_config: |-\r\n    {\r\n      'name': 'k8s-pod-network',\r\n      'cniVersion': '0.3.1',\r\n      'plugins': [\r\n        {\r\n          'type': 'calico',\r\n          'log_level': 'info',\r\n          'log_file_path': '/var/log/calico/cni/cni.log',\r\n          'datastore_type': 'kubernetes',\r\n          'nodename': '__KUBERNETES_NODE_NAME__',\r\n          'mtu': __CNI_MTU__,\r\n          'ipam': {\r\n              'type': 'calico-ipam',\r\n              'ipv4_pools': ['default-ipv4-ippool']\r\n          },\r\n          'policy': {\r\n              'type': 'k8s'\r\n          },\r\n          'kubernetes': {\r\n              'kubeconfig': '__KUBECONFIG_FILEPATH__'\r\n          },\r\n         'feature_control': {\r\n             'ip_addrs_no_ipam': true\r\n         }\r\n        },\r\n        {\r\n          'type': 'portmap',\r\n          'snat': true,\r\n          'capabilities': {'portMappings': true}\r\n        },\r\n        {\r\n          'type': 'bandwidth',\r\n          'capabilities': {'bandwidth': true}\r\n        }\r\n      ]\r\n    }\r\n  typha_service_name: none\r\n  veth_mtu: '0'\r\nkind: ConfigMap\r\nmetadata:\r\n  name: calico-config\r\n  namespace: kube-system\r\n```\r\n\r\n\u3002", "top": 0, "createdAt": 1719890593, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-02", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "go": "#2EC2A5", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "\u9f99\u5b87\u7fd4\u7684\u5c0f\u672c\u672c", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://longxiucai.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}